# Environment Configuration - Studio ERP
# Generated by Ansible on {{ ansible_date_time.iso8601 }}
# Environment: {{ env }}

# ═══════════════════════════════════════════════════════
# Database
# ═══════════════════════════════════════════════════════
DATABASE_URL="postgresql://{{ postgresql_user }}:{{ vault_postgresql_password | regex_replace('%', '%25') | regex_replace('@', '%40') | regex_replace(':', '%3A') | regex_replace('/', '%2F') | regex_replace('#', '%23') | regex_replace('\\?', '%3F') | regex_replace('&', '%26') | regex_replace('=', '%3D') }}@localhost:{{ postgresql_port }}/{{ postgresql_database }}?schema=public"

# ═══════════════════════════════════════════════════════
# NextAuth.js
# ═══════════════════════════════════════════════════════
NEXTAUTH_SECRET="{{ vault_nextauth_secret }}"
NEXTAUTH_URL="{{ vault_nextauth_url }}"

# ═══════════════════════════════════════════════════════
# Stripe (Payment Gateway)
# ═══════════════════════════════════════════════════════
STRIPE_PUBLISHABLE_KEY="{{ vault_stripe_publishable_key }}"
STRIPE_SECRET_KEY="{{ vault_stripe_secret_key }}"
STRIPE_WEBHOOK_SECRET="{{ vault_stripe_webhook_secret }}"

# ═══════════════════════════════════════════════════════
# SendGrid (Email Service)
# ═══════════════════════════════════════════════════════
SENDGRID_API_KEY="{{ vault_sendgrid_api_key }}"

# ═══════════════════════════════════════════════════════
# OpenAI (AI Assistant - Optional)
# ═══════════════════════════════════════════════════════
{% if vault_openai_api_key is defined %}
OPENAI_API_KEY="{{ vault_openai_api_key }}"
{% endif %}

# ═══════════════════════════════════════════════════════
# Upstash Redis (Rate Limiting)
# ═══════════════════════════════════════════════════════
{% if vault_upstash_redis_rest_url is defined %}
UPSTASH_REDIS_REST_URL="{{ vault_upstash_redis_rest_url }}"
UPSTASH_REDIS_REST_TOKEN="{{ vault_upstash_redis_rest_token }}"
{% endif %}

# ═══════════════════════════════════════════════════════
# Sentry (Error Tracking - Optional)
# ═══════════════════════════════════════════════════════
{% if vault_sentry_dsn is defined %}
NEXT_PUBLIC_SENTRY_DSN="{{ vault_sentry_dsn }}"
{% endif %}

# ═══════════════════════════════════════════════════════
# Application URLs
# ═══════════════════════════════════════════════════════
NEXT_PUBLIC_APP_URL="https://{{ app_domain }}"

# ═══════════════════════════════════════════════════════
# Environment
# ═══════════════════════════════════════════════════════
NODE_ENV=production
PORT={{ app_port }}
